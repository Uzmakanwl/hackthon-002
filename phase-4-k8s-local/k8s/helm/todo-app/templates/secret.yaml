apiVersion: v1
kind: Secret
metadata:
  name: {{ include "todo-app.fullname" . }}-secret
  labels:
    {{- include "todo-app.labels" . | nindent 4 }}
type: Opaque
data:
  # Base64-encoded values â€” replace with actual credentials before deploying
  # echo -n "postgresql://todouser:todopass@postgres:5432/tododb" | base64
  database-url: {{ printf "postgresql://%s:%s@%s-postgres:%d/%s" .Values.postgres.username "todopass" (include "todo-app.fullname" .) (.Values.postgres.port | int) .Values.postgres.database | b64enc | quote }}
